<ion-header>
  <ion-navbar>
    <ion-title>Criar Usuário</ion-title>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <form
    [formGroup]="formGroup"
    (ngSubmit)="signupUser(); $event.preventDefault()"
  >
    <ion-item>
      <ion-label stacked>Nome*</ion-label>
      <ion-input
        [(ngModel)]="membro.nome"
        formControlName="nome"
        type="text"
      ></ion-input>
    </ion-item>
    <p
      class="danger"
      *ngIf="formGroup.controls.nome.dirty && formGroup.controls.nome.errors"
      margin-left
    >
      Valor inválido
    </p>
    <ion-item>
      <ion-label stacked>E-mail*</ion-label>
      <ion-input
        [(ngModel)]="membro.email"
        formControlName="email"
        type="text"
      ></ion-input>
    </ion-item>
    <p
      class="danger"
      *ngIf="formGroup.controls.email.dirty && formGroup.controls.email.errors"
      margin-left
    >
      Valor inválido
    </p>
    <ion-item>
      <ion-label stacked>CPF *</ion-label>
      <ion-input
        formControlName="cpf"
        type="text"
        autocomplete="false"
        style="display: none;"
      ></ion-input>
      <ion-input
        [brmasker]="{person: true}"
        [(ngModel)]="membro.cpf"
        formControlName="cpf"
        type="text"
      ></ion-input>
    </ion-item>
    <p
      class="danger"
      *ngIf="formGroup.controls.cpf.dirty && formGroup.controls.cpf.errors"
      margin-left
    >
      Valor inválido
    </p>
    <ion-item>
      <ion-label stacked>Data de Nascimento *</ion-label>
      <ion-datetime
        [(ngModel)]="membro.dataNascimento"
        displayFormat="DD/MM/YYYY"
        formControlName="dataNascimento"
        pickerFormat="DD/MM/YYYY"
      ></ion-datetime>
    </ion-item>
    <p
      class="danger"
      *ngIf="formGroup.controls.dataNascimento.dirty && formGroup.controls.dataNascimento.errors"
      margin-left
    >
      Valor inválido
    </p>

    <ion-item>
      <ion-label stacked>Senha*</ion-label>
      <ion-input
        [(ngModel)]="membro.senha"
        formControlName="senha"
        type="password"
      ></ion-input>
    </ion-item>
    <p
      class="danger"
      *ngIf="formGroup.controls.senha.dirty && formGroup.controls.senha.errors"
      margin-left
    >
      Valor inválido
    </p>
    <ion-item>
      <ion-label stacked>Logradouro*</ion-label>
      <ion-input
        [(ngModel)]="membro.logradouro"
        formControlName="logradouro"
        type="text"
      ></ion-input>
    </ion-item>
    <p
      class="danger"
      *ngIf="formGroup.controls.logradouro.dirty && formGroup.controls.logradouro.errors"
      margin-left
    >
      Valor inválido
    </p>
    <ion-item>
      <ion-label stacked>Número*</ion-label>
      <ion-input
        [(ngModel)]="membro.numero"
        formControlName="numero"
        type="text"
      ></ion-input>
    </ion-item>
    <p
      class="danger"
      *ngIf="formGroup.controls.numero.dirty && formGroup.controls.numero.errors"
      margin-left
    >
      Valor inválido
    </p>
    <ion-item>
      <ion-label stacked>Complemento</ion-label>
      <ion-input
        [(ngModel)]="membro.complemento"
        formControlName="complemento"
        type="text"
      ></ion-input>
    </ion-item>
    <ion-item>
      <ion-label stacked>Bairro</ion-label>
      <ion-input
        [(ngModel)]="membro.bairro"
        formControlName="bairro"
        type="text"
      ></ion-input>
    </ion-item>
    <ion-item>
      <ion-label stacked>CEP *</ion-label>
      <ion-input
        [(ngModel)]="membro.cep"
        [brmasker]="{mask:'00.000-000', len:10}"
        formControlName="cep"
        type="text"
      ></ion-input>
    </ion-item>
    <p
      class="danger"
      *ngIf="formGroup.controls.cep.dirty && formGroup.controls.cep.errors"
      margin-left
    >
      Valor inválido
    </p>
    <ion-item>
      <ion-label stacked>Estado *</ion-label>
      <ion-select formControlName="estadoId" (ionChange)="updateCidades()">
        <ion-option
          *ngFor="let estado of estados; first as f"
          [value]="estado.id"
          [selected]="f"
          >{{ estado.nome }}
        </ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label stacked>Cidade *</ion-label>
      <ion-select formControlName="cidadeId">
        <ion-option *ngFor="let cidade of cidades" [value]="cidade.id"
          >{{cidade.nome}}</ion-option
        >
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label stacked>Telefone </ion-label>
      <ion-input
        [(ngModel)]="membro.telefones"
        [brmasker]="{phone: true}"
        formControlName="telefone"
        type="text"
      ></ion-input>
    </ion-item>
    <p
      class="danger"
      *ngIf="formGroup.controls.telefone.dirty && formGroup.controls.telefone.errors"
      margin-left
    >
      Valor inválido
    </p>
    <ion-item>
      <ion-label stacked>Celular</ion-label>
      <ion-input
        formControlName="celular"
        [brmasker]="{phone: true}"
        type="text"
      ></ion-input>
    </ion-item>
    <ion-item>
      <ion-label stacked>Igreja *</ion-label>
      <ion-select formControlName="igrejaId">
        <ion-option
          *ngFor="let igreja of igrejas; first as p"
          [value]="igreja.id"
          [selected]="p"
          >{{ igreja.nome }}
        </ion-option>
      </ion-select>
    </ion-item>

    <button ion-button block type="submit" [disabled]="formGroup.invalid">
      Criar conta
    </button>
  </form>
</ion-content>
